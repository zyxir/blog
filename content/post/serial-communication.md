---
title: "关于串行通信的调研"
date: 2020-08-29T11:11:29+08:00
tags:
-
categories:
-
mathjax: false
mathjaxEnableSingleDollar: false
mathjaxEnableAutoNumber: false
mermaid: false
draft: true
---

最近的工作涉及到了一些串行通信的知识，了解到了有关 SerDes（Serializer/Deserializer，串行器/解串器）和 MGT（Multi-gigabit transceiver，数 G 比特的收发器）的许多知识，发现这块知识非常有趣，并且涉及到了许多有用的名词，于是进行了一些稍微深入的了解、调研。

<!--more-->

## 串行通信的基本概念[^1][^2]

通信是一种信息交换的过程。数字信号在两个设备之间的传输，可以是串行（Serial）的，也可以是并行（Parallel）的。

{{< figure src="/post/serial-communication/Parallel_and_Serial_Transmission.gif" title="并行与串行通信" >}}

不了解的人，包括刚开始学习时的我，都会好奇，几根线一起传输数据，不是会更快吗？为什么还要用串行，全都用并行不就行了吗？下面一层层地解构这个问题。

### 生活中随处可见的串行通信

{{< figure src="/post/serial-communication/laptop-ports.jpg" title="笔记本电脑上的接口" >}}

我们的笔记本电脑上，一般有这些接口：电源线接口，USB 口（Type-A 和 Type-C），雷电 3 口（和 USB Type-C 接口相同），网线接口，HDMI 口，3.5mm 音频与麦克风接口，等等。电源线不是用来传输信息的，而 3.5mm 口传输的是模拟信号，因此不存在串/并的概念。除去这两者的其它接口中：

- USB 的 S，就是 Serial 的意思，它传输的就是串行信号。
- 雷电 3 采用 USB Type-C 接口，传输的也是串行信号。
- 以太网的 8P8C（或称为 RJ45）接口，使用两对差分线进行全双工通信，传输的是串行信号。
- HDMI 接口比较复杂，里面有好几个信道，用各自不同的协议传输信息，但也都是基于串行传输的。

可是说，我们生活中用到的线缆，绝大多数都是串行传输的。到这里，读者也可以想象到串行传输的一个优点了——线少。如果上述的接头，每个信道都改成并行传输，且不谈并行传输带来的其它问题，就是接头本身，都要复杂上很多倍；连接设备之间的线缆，也会比现在要粗很多。想象一下，你的鼠标线变得和网线一样粗，视频线变得和铠装电缆一样粗，并且接口和三孔插头一样大，里面密密麻麻上百个接触点，你还会觉得并行好吗？哪怕你觉得没问题，加工它们的工厂的成本也会成倍地上升。

### 串行通信的优势

从上面的讲述可以知道，各种设备之间的连线，采用串口可以降低制造与维护的成本，简化使用难度。在集成电路芯片层面，引脚数的提升，会提高制造难度与成本，而使用串口通信，可以节约引脚数。因此，芯片间的通信也经常是串行通信。这是串行通信的第一个优势，就是制造容易、成本低廉。

你可能会认为，如果想传输非常高速的数据，几根线一起传会更快，所以并行通信一定比串行通信更快吧。事实并不是这样，**为了达到较高的数据率，串行通信的时钟频率可以设置得比并行通信高很多**，因为：

- 并行通信的时钟频率提高后，不同信道之间的时钟 skew 很大。
- 串行通信线少，占用空间也少，更容易设计屏蔽层，来屏蔽外界干扰。
- 并行通信会受到串扰影响，即各根信号线之间会互相干扰，而串行通信不会。

因此，串行通信更适合超高速数据的传播。事实上，在某些场合下，为了进一步增加数据率，也存在使用多条串行通道来同时传输数据的方法，例如 CPU 与独立显卡之间的通信，就通常会用到多条 PCIe 通道。但是由于这几条通道之间并不同步，这不能被称作并行通信。**对于 Gpbs 速度级别的高速串行通信，是本文的重点，下文会专门讲到。**

## SerDes

最基本的概念就是 SerDes。数字信号可以是串行传输的，也可以是并行传输的，而 SerDes 就是进行串/并转换和并/串转换的。

{{< figure src="/post/serial-communication/SerDes.svg" title="SerDes 的形象表示" >}}

## 参考资料

这只是篇博客文章，对于参考资料的格式不要太较真哈。

[^1]: 周荷琴，《微型计算机原理与接口技术》，第 6 版，中国科学技术大学出版社。[在京东上购买](https://item.jd.com/12496635.html)
[^2]: [Serial communication - Wikipedia](https://en.wikipedia.org/wiki/Serial_communication)